---
phase: 03-branding-and-documentation
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - .mcp.json
  - README.md
  - docs/TODO.md
  - docs/api-reference.md
  - docs/codex-cli-integration.md
  - docs/plan.md
  - docs/session-management.md
autonomous: true
requirements:
  - CLEAN-03
  - CLEAN-04

must_haves:
  truths:
    - "package.json name is copilot-mcp-server, bin key is copilot-mcp-server, description and keywords reference Copilot not Codex"
    - ".mcp.json server key is copilot-cli (not codex-cli)"
    - "README.md header is Copilot MCP Server; no Codex references survive in the file"
    - "README.md documents copilot binary install (npm/brew/winget/script), COPILOT_GITHUB_TOKEN auth, model selection with interactive activation note, and --allow-all-tools security note"
    - "README.md MCP add command uses npx -y copilot-mcp-server (not codex-mcp-server)"
    - "docs/ directory is deleted entirely"
    - "grep for codex|Codex|CODEX across package.json, .mcp.json, README.md returns zero results"
    - "npm test still passes (no source changes; sanity check)"
  artifacts:
    - path: "package.json"
      provides: "npm package metadata"
      contains: "copilot-mcp-server"
    - path: ".mcp.json"
      provides: "MCP server config"
      contains: "copilot-cli"
    - path: "README.md"
      provides: "User-facing documentation"
      min_lines: 80
  key_links:
    - from: "README.md"
      to: "package.json bin key"
      via: "npx -y copilot-mcp-server in claude mcp add command"
      pattern: "npx -y copilot-mcp-server"
    - from: "README.md"
      to: "docs/"
      via: "No links to docs/ — directory deleted"
      pattern: "docs/"
---

<objective>
Update all user-facing project artifacts from Codex to Copilot branding. Rewrite README with accurate prerequisites (copilot binary install, token auth, model selection, security note). Delete stale docs/ directory. Update package.json metadata and .mcp.json server key.

Purpose: Users discovering this package must be able to install and configure it without referencing any Codex documentation. All package metadata, config, and docs must reflect the Copilot identity.
Output: Updated package.json, .mcp.json, rewritten README.md, deleted docs/ directory.
</objective>

<execution_context>
@/Users/jonathanborduas/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jonathanborduas/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-branding-and-documentation/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update package.json metadata and .mcp.json server key</name>
  <files>package.json, .mcp.json</files>
  <action>
Update package.json. Read the current file first, then write the updated version with these exact changes:
- `name`: change from `"codex-mcp-server"` to `"copilot-mcp-server"`
- `description`: change from `"MCP server wrapper for OpenAI Codex CLI"` to `"MCP server wrapper for GitHub Copilot CLI"`
- `bin` key: rename from `"codex-mcp-server"` to `"copilot-mcp-server"` (value `"dist/index.js"` unchanged)
- `keywords`: replace `["mcp", "codex", "openai", "claude", "ai", "cli"]` with `["mcp", "copilot", "github", "claude", "ai", "cli"]`
- `directories.doc`: remove the entire `"directories"` field (it pointed to docs/ which is being deleted)
- `repository`, `bugs`, `homepage`: remove all three fields entirely. The current URLs point to `github.com/tuannvm/codex-mcp-server` which is a wrong project — removing them is safer than leaving incorrect URLs. (Per research recommendation: if unknown, remove rather than leave wrong.)
- `version`, `main`, `files`, `scripts`, `dependencies`, `devDependencies`, `author`, `license`, `type`: leave ALL unchanged.

Update .mcp.json. Read the current file first, then write the updated version:
- Change the server key from `"codex-cli"` to `"copilot-cli"` (the outer key inside `"mcpServers"`)
- All other fields (`type`, `command`, `args`, `env`) remain unchanged.
  </action>
  <verify>
Run: grep -E "codex|Codex|CODEX" package.json .mcp.json
Expected: zero matches.
Run: node -e "const p = JSON.parse(require('fs').readFileSync('package.json','utf8')); console.log(p.name, p.bin, p.keywords)"
Expected output contains: copilot-mcp-server { 'copilot-mcp-server': 'dist/index.js' } [ 'mcp', 'copilot', 'github', 'claude', 'ai', 'cli' ]
  </verify>
  <done>package.json name/bin/keywords/description are Copilot-branded with no Codex references; .mcp.json server key is "copilot-cli"; repository/bugs/homepage fields are removed from package.json</done>
</task>

<task type="auto">
  <name>Task 2: Delete docs/ directory and write full README.md</name>
  <files>docs/TODO.md, docs/api-reference.md, docs/codex-cli-integration.md, docs/plan.md, docs/session-management.md, README.md</files>
  <action>
Step 1 — Delete docs/ directory entirely:
Run: rm -rf /Users/jonathanborduas/code/copilot-mcp-server/docs
The docs/ directory contains five Codex-era files (TODO.md, api-reference.md, codex-cli-integration.md, plan.md, session-management.md). All are factually wrong for the Copilot integration. Deleting the directory is safer than editing — no valid content survives.

Step 2 — Write README.md from scratch. Use the Write tool to create the file at the project root. The README must contain all sections below in this order. Do NOT leave any Codex references (no "codex", "Codex", "CODEX", "codex login", "codex-mcp-server", "@openai/codex", "OpenAI Codex", "codex-cli") anywhere in the file.

Write this exact README content:

---
# Copilot MCP Server

An MCP (Model Context Protocol) server that wraps the GitHub Copilot CLI, letting coding agents invoke `ask`, `suggest`, and `explain` capabilities over MCP with zero friction.

## Prerequisites

- **GitHub Copilot subscription** (Pro, Pro+, Business, or Enterprise)
- **Node.js 22+**

## Install Copilot CLI

**npm (all platforms, requires Node.js 22+):**
```bash
npm install -g @github/copilot
```

**macOS / Linux (Homebrew):**
```bash
brew install copilot-cli
```

**Windows (WinGet):**
```bash
winget install GitHub.Copilot
```

**Script (macOS / Linux):**
```bash
curl -fsSL https://gh.io/copilot-install | bash
```

After installing, verify the binary is available:
```bash
copilot --version
```

## Authenticate

**Option A: Environment variable (recommended for MCP servers)**

Set one of the following (highest priority first):
```bash
export COPILOT_GITHUB_TOKEN="ghp_your_token_here"  # recommended
# or
export GITHUB_TOKEN="ghp_your_token_here"
# or
export GH_TOKEN="ghp_your_token_here"
```

Your GitHub Personal Access Token must have the **Copilot Requests** permission enabled.

**Option B: Interactive login (first-time setup)**
```bash
copilot
# Type: /login
# Follow the on-screen instructions
```

## Add to Claude Code

```bash
claude mcp add copilot-cli -- npx -y copilot-mcp-server
```

Or add manually to your MCP config:
```json
{
  "mcpServers": {
    "copilot-cli": {
      "type": "stdio",
      "command": "npx",
      "args": ["-y", "copilot-mcp-server"]
    }
  }
}
```

## Tools

| Tool | Description | Parameters |
|------|-------------|------------|
| `ask` | Ask a natural language question and receive a Copilot agent response | `prompt` (required), `model` (optional), `addDir` (optional) |
| `suggest` | Get a command suggestion for a task description | `prompt` (required), `target` (`shell`\|`git`\|`gh`, optional), `model` (optional), `addDir` (optional) |
| `explain` | Get a plain-language explanation of a shell command | `command` (required), `model` (optional), `addDir` (optional) |
| `ping` | Verify the MCP server is running | none |

## Model Selection

Pass the `model` parameter to `ask`, `suggest`, or `explain`:

```
Use ask with model "gpt-4o" to analyze this function
Use ask with model "claude-sonnet-4-5" to refactor this module
```

**Default model:** `gpt-4.1`

**Available models include:** `gpt-4.1`, `gpt-4o`, `claude-sonnet-4-5`, `claude-opus-4-5`, `gemini-2.0-flash`, and others accepted by the Copilot CLI.

> **Note:** Claude and Gemini models may require prior interactive activation. Run `copilot` interactively, select the model via `/model`, and confirm it works before using it via the MCP server. The default model `gpt-4.1` works immediately without activation.

## Additional Directories

Pass the `addDir` parameter to expose additional filesystem paths to the Copilot agent:

```
Use ask with addDir "/path/to/project" to answer questions about that project
```

## Security Note: --allow-all-tools

This server passes `--allow-all-tools` to every Copilot invocation. This flag permits the Copilot agent to execute shell commands, read files, and make network requests on your behalf. Only use this server in trusted environments and with prompts you control.

## Environment Variables

| Variable | Description |
|----------|-------------|
| `COPILOT_GITHUB_TOKEN` | GitHub PAT for authentication (highest priority, requires Copilot Requests permission) |
| `GITHUB_TOKEN` | GitHub token fallback |
| `GH_TOKEN` | GitHub token fallback (used by gh CLI) |
| `COPILOT_BINARY_PATH` | Override the default `copilot` binary location (for non-PATH installs) |

## Known Limitations

- **Interactive activation required for some models:** Claude and Gemini model families must be activated interactively (via `copilot` TUI) before they work reliably in non-interactive `-p` mode.
- **Auth token fallback behavior:** When `COPILOT_GITHUB_TOKEN` is set to an invalid value, the CLI may silently fall through to stored keyring credentials rather than failing immediately. Verify authentication by running `copilot` interactively if unexpected behavior occurs.
- **`--allow-all-tools` is hardcoded:** The security flag cannot be disabled from the MCP interface. See Security Note above.

## Development

```bash
npm install
npm run build
npm test
```

## License

ISC
---

(End of README content. Write everything between the first `#` and `ISC` as the file content.)
  </action>
  <verify>
Run: ls /Users/jonathanborduas/code/copilot-mcp-server/docs 2>/dev/null && echo "DOCS EXISTS - FAIL" || echo "docs/ deleted - OK"
Expected: "docs/ deleted - OK"

Run: grep -c "copilot-mcp-server" /Users/jonathanborduas/code/copilot-mcp-server/README.md
Expected: at least 3 occurrences (header, npx command, MCP config)

Run: grep -E "codex|Codex|CODEX" /Users/jonathanborduas/code/copilot-mcp-server/README.md
Expected: zero matches
  </verify>
  <done>docs/ directory is gone; README.md is fully rewritten with Copilot branding covering install, auth, tools table, model selection, security note, env vars, known limitations, and development; no Codex references remain in README</done>
</task>

<task type="auto">
  <name>Task 3: Final verification — grep sweep and test run</name>
  <files></files>
  <action>
Run a comprehensive grep sweep to confirm zero Codex residue in all user-facing files:

```bash
grep -rE "codex|Codex|CODEX" \
  /Users/jonathanborduas/code/copilot-mcp-server/package.json \
  /Users/jonathanborduas/code/copilot-mcp-server/README.md \
  /Users/jonathanborduas/code/copilot-mcp-server/.mcp.json \
  2>/dev/null
```

Expected: zero results. If any match is found, fix it before proceeding.

Then run the full test suite to confirm no source regressions:
```bash
cd /Users/jonathanborduas/code/copilot-mcp-server && npm test
```

Expected: all tests pass (51 tests from Phase 2 final suite).

Also verify the package.json is valid JSON:
```bash
node -e "JSON.parse(require('fs').readFileSync('/Users/jonathanborduas/code/copilot-mcp-server/package.json','utf8')); console.log('valid JSON')"
```
Expected: "valid JSON"

And verify .mcp.json is valid JSON:
```bash
node -e "JSON.parse(require('fs').readFileSync('/Users/jonathanborduas/code/copilot-mcp-server/.mcp.json','utf8')); console.log('valid JSON')"
```
Expected: "valid JSON"
  </action>
  <verify>
grep sweep returns zero results; npm test passes; both JSON files parse without error
  </verify>
  <done>Zero Codex references in package.json, README.md, .mcp.json; all 51 tests pass; both JSON files are valid</done>
</task>

</tasks>

<verification>
1. grep -rE "codex|Codex|CODEX" package.json README.md .mcp.json → zero matches
2. npm test → all tests pass (no source was changed)
3. node -e "const p = JSON.parse(require('fs').readFileSync('package.json','utf8')); console.log(p.name)" → "copilot-mcp-server"
4. node -e "const m = JSON.parse(require('fs').readFileSync('.mcp.json','utf8')); console.log(Object.keys(m.mcpServers))" → ["copilot-cli"]
5. ls docs/ → "No such file or directory"
6. grep "npx -y copilot-mcp-server" README.md → match found
7. grep "COPILOT_GITHUB_TOKEN" README.md → match found
8. grep "allow-all-tools" README.md → match found
</verification>

<success_criteria>
- package.json name is "copilot-mcp-server"; bin key is "copilot-mcp-server"; keywords contain "copilot" not "codex"; repository/bugs/homepage fields removed
- .mcp.json server key is "copilot-cli"
- README.md contains: install section (npm/brew/winget/script), auth section (COPILOT_GITHUB_TOKEN + /login), tools table (ask/suggest/explain/ping), model selection with interactive activation note, --allow-all-tools security note, env vars table, known limitations
- docs/ directory does not exist
- grep sweep of all three user-facing files returns zero Codex references
- npm test passes (51 tests, no regressions)
</success_criteria>

<output>
After completion, create `.planning/phases/03-branding-and-documentation/03-01-SUMMARY.md` following the summary template at @/Users/jonathanborduas/.claude/get-shit-done/templates/summary.md
</output>
